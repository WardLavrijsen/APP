(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{214:function(e,t,a){},239:function(e,t,a){},241:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){"use strict";a.r(t);var c=a(4),r=a.n(c),n=a(94),s=a.n(n),o=(a(239),a(12)),i=a.n(o),l=a(29),d=a(11),u=(a(241),a(225)),j=(a(355),a(1)),h=function(e){return Object(j.jsxs)("div",{className:"graph",children:[Object(j.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:600,textAlign:"center",transform:"translateY(20px)"},children:"Power Usage"}),Object(j.jsx)(u.a,{data:e.data,margin:{top:30,right:30,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},yFormat:" >-.2f",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:3,tickRotation:0,legend:"Time",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Energy usage",legendOffset:-40,legendPosition:"middle"},colors:e.color,lineWidth:4,pointSize:2,pointColor:{from:"color",modifiers:[]},pointBorderWidth:8,pointBorderColor:{from:"color",modifiers:[]},pointLabelYOffset:-12,enableArea:!0,areaOpacity:.35,useMesh:!0})]})},b=(a(356),a(226)),m=function(e){var t;return e.data!==[]&&(t=e.data.reduce((function(e,t){return e+("No Data"===t.value?0:t.value)}),0)),Object(j.jsxs)("div",{className:"piegraph",children:[Object(j.jsxs)("div",{className:"overlay",children:[Object(j.jsx)("p",{className:"powerusage",children:"power usage:"}),Object(j.jsx)("h2",{className:"wattamount",children:t}),Object(j.jsx)("h3",{className:"watts",children:"Watts"})]}),Object(j.jsx)("div",{className:"piechart",children:Object(j.jsx)(b.a,{data:e.data,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.75,activeInnerRadiusOffset:2,activeOuterRadiusOffset:14,borderWidth:5,colors:["#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393"],borderColor:{from:"color",modifiers:[["darker","1"]]},enableArcLinkLabels:!1,arcLinkLabelsSkipAngle:0,arcLinkLabelsTextColor:{from:"color",modifiers:[]},arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color",modifiers:[]},enableArcLabels:!1,arcLabel:"value",arcLabelsRadiusOffset:.45,arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[]})})]})},f=a(142),x=a(37),p=a.n(x),v=["#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393"],g=function(){var e=Object(l.a)(i.a.mark((function e(t,a){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=localStorage.getItem("authtoken"))){e.next=12;break}return e.next=5,p.a.get("/api/getuserdata",{headers:{authorization:"Bearer ".concat(c)}});case 5:200!==(r=e.sent).status&&(localStorage.removeItem("authtoken"),window.location.href="/login"),r.data.data.user.devices=r.data.data.user.devices.map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{color:v[t]})})),t(r.data.data.user),a(r.data.data.user.devices),e.next=14;break;case 12:localStorage.removeItem("authtoken"),window.location.href="/login";case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),localStorage.removeItem("authtoken"),window.location.href="/login";case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),O=g,k=(a(374),a(38)),N=function(e){var t=e.setModal;return Object(j.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsxs)("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"15px",gap:"5px"},children:[Object(j.jsx)("a",{href:"/",className:"logo",children:Object(j.jsx)("img",{src:"https://www.projectpmu.xyz/earth.png",alt:"pmu logo",className:"logo"})}),Object(j.jsx)("div",{className:"dashboardText",children:"PMU Dashboard"})]}),Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsxs)("button",{className:"settings",onClick:function(){return t(!0)},children:[Object(j.jsx)(k.f,{className:"settingIcon"}),Object(j.jsx)("div",{style:{color:"#316526",fontSize:"1.7rem",whiteSpace:"nowrap"},children:"Settings"})]}),Object(j.jsxs)("button",{onClick:function(){localStorage.removeItem("authtoken"),window.location.href="/"},className:"logOut",children:[Object(j.jsx)(k.c,{className:"logOutIcon"}),Object(j.jsx)("div",{style:{color:"white",fontSize:"1.7rem",whiteSpace:"nowrap"},children:"Log out"})]})]})]})},w=(a(214),a(223)),y=function(e){return Object(j.jsx)("div",{className:"range-bar",children:Object(j.jsx)(w.a,{data:[{id:"",ranges:[20,40,70,100],measures:[0],markers:[e.marker]}],margin:{top:50,right:90,bottom:50,left:90},spacing:42,titlePosition:"after",titleOffsetX:-53,rangeBorderColor:{from:"color",modifiers:[]},measureSize:.1,markerSize:1.5,measureColors:"#ffffff",markerColors:"#000000",rangeColors:["#27ae60","#F1C40F","#F39C12","#C0392B"]})})},C=function(e){if("test"===e.device)return Object(j.jsx)("div",{className:"general-box",children:Object(j.jsx)("h1",{style:{fontSize:"3rem"},children:"Please Select A Device"})});try{return Object(j.jsxs)("div",{className:"general-box",children:[Object(j.jsxs)("div",{className:"text-items",children:[Object(j.jsxs)("h1",{className:"kosten-test",children:["Power State: ",e.device.relaypower?"ON":"OFF"]}),Object(j.jsxs)("h1",{className:"kosten-test",children:["Verbruik:"," ",e.device.archive[e.device.archive.length-1].power," W"]}),Object(j.jsxs)("h1",{className:"kosten-test",children:["Kosten:"," ",e.price?(e.price*(e.device.archive[e.device.archive.length-1].power/1e3)).toFixed(2):"No Energyprice"," ","\u20ac"]}),Object(j.jsxs)("h1",{className:"kosten-test",children:["Uitstoot:"," ",(e.device.archive[e.device.archive.length-1].power/1e3*.649).toFixed(2)," ","kg"]})]}),Object(j.jsx)("div",{className:"range-bar-box",children:Object(j.jsx)(y,{marker:e.device.efficiency})})]})}catch(t){return Object(j.jsx)("div",{className:"general-box",children:Object(j.jsx)("h1",{style:{fontSize:"3rem"},children:"No Data on device"})})}},S=(a(375),function(e){var t=Object(c.useState)(""),a=Object(d.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(""),o=Object(d.a)(s,2),u=o[0],h=o[1],b=Object(c.useState)(""),m=Object(d.a)(b,2),f=m[0],x=m[1],v=function(){var t=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r){t.next=5;break}return t.next=4,p.a.patch("/api/change/email",{email:r},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}});case 4:t.sent;case 5:if(!u){t.next=9;break}return t.next=8,p.a.patch("/api/change/postalcode",{postalcode:u},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}});case 8:t.sent;case 9:if(!f){t.next=14;break}return console.log(f),t.next=13,p.a.patch("/api/change/energyprice",{energyprice:f},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}});case 13:t.sent;case 14:e.setModal(!1),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.user.email),t.prev=1,t.next=4,p.a.post("/api/forgotpassword",{email:e.user.email});case 4:t.sent,localStorage.removeItem("authtoken"),window.location="/login",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/change/deleteaccount",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}});case 3:e.sent,localStorage.removeItem("authtoken"),window.location="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"background",children:[Object(j.jsxs)("div",{className:"bar1",children:[Object(j.jsx)("div",{className:"head",children:"Personal Information"}),Object(j.jsx)(k.g,{onClick:function(){return e.setModal(!1)},className:"close"})]}),Object(j.jsxs)("div",{className:"bar2",children:[Object(j.jsx)(k.d,{style:{width:"28px",height:"28px",marginTop:"1%"}}),Object(j.jsx)("div",{className:"text",children:"Email"})]}),Object(j.jsx)("div",{className:"bar3",children:Object(j.jsx)("input",{value:r,onChange:function(e){return n(e.target.value)},className:"inputEmail"})}),Object(j.jsxs)("div",{className:"bar4",children:[Object(j.jsxs)("div",{className:"postal",children:[Object(j.jsx)(k.e,{className:"icon"}),Object(j.jsx)("div",{className:"text",children:"Postal Code"})]}),Object(j.jsxs)("div",{className:"energy",children:[Object(j.jsx)(k.a,{className:"icon"}),Object(j.jsx)("div",{className:"text",children:"Energy Price"})]})]}),Object(j.jsxs)("div",{className:"bar5",children:[Object(j.jsx)("div",{className:"bar5div",children:Object(j.jsx)("input",{value:u,onChange:function(e){return h(e.target.value)},className:"bar5input"})}),Object(j.jsx)("div",{className:"bar5div",children:Object(j.jsx)("input",{value:f,onChange:function(e){return x(e.target.value)},className:"bar5input"})})]}),Object(j.jsx)("button",{onClick:v,className:"savebutton",children:"Change"}),Object(j.jsxs)("button",{onClick:g,className:"changepassword",children:[Object(j.jsx)(k.b,{style:{fontSize:"24px"},className:"lock"}),Object(j.jsx)("div",{style:{fontSize:"24px"},children:"Change password"})]}),Object(j.jsxs)("button",{onClick:O,className:"deleteaccount",children:[Object(j.jsx)(k.h,{style:{fontSize:"24px"},className:"xcircle"}),Object(j.jsx)("div",{style:{fontSize:"24px"},children:"Delete account"})]})]})}),I=(a(376),function(e){var t,a=e.data,c=e.callback;return t=a.current?{border:"4px solid ".concat(a.cardColor),backgroundColor:"".concat(a.cardColor),color:"#ffffff"}:{border:"4px solid ".concat(a.cardColor)},Object(j.jsxs)("div",{onClick:c.bind(this,a.id),style:t,className:"device-card",children:[Object(j.jsx)("div",{style:{backgroundColor:a.cardColor},className:"block"}),Object(j.jsx)("h2",{className:"device-name",children:a.name}),Object(j.jsx)("div",{style:{backgroundColor:a.powerColor},className:"power-card",children:Object(j.jsx)("h3",{className:"power-data-label",children:"".concat(a.power," ").concat("No Data"===a.power?"":" W")})})]})}),z=function(e){var t=e.devices,a=e.setCurrentDevice,c=e.currentDevice;return Object(j.jsx)("div",{style:{width:"100%",height:"100%"},children:t.map((function(e){var r,n=e===c,s=e.id;return r=e.archive[e.archive.length-1]?e.archive[e.archive.length-1].power:"No Data",Object(j.jsx)(I,{callback:function(e){return a(t.find((function(t){return t.id===e})))},data:{cardColor:e.color,powerColor:"#F39C12",power:r,name:e.name,id:s,current:n}},s)}))})},L=a(224);var B=function(){var e=Object(c.useState)({}),t=Object(d.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)([]),s=Object(d.a)(n,2),o=s[0],u=s[1],b=Object(c.useState)({}),f=Object(d.a)(b,2),x=f[0],v=f[1],g=Object(c.useState)(!1),k=Object(d.a)(g,2),w=k[0],y=k[1];Object(c.useEffect)((function(){O(r,u)}),[]);var I=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/setpower",{state:x.relaypower?0:1,id:x.id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}});case 3:e.sent,O(r,u),x.relaypower=x.relaypower?0:1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{onClick:function(){return y(!1)},className:"modalOverlay",style:w?{}:{display:"none"}}),Object(j.jsx)("div",{className:"settingsmodalhome",style:w?{}:{display:"none"},children:Object(j.jsx)(S,{user:a,setModal:y})}),Object(j.jsx)("div",{className:"Pie",children:Object(j.jsx)(m,{data:o.map((function(e){var t=e.archive[e.archive.length-1]?e.archive[e.archive.length-1].power:"No Data";return{id:e.name,label:e.name,value:t}}))})}),Object(j.jsx)("div",{className:"Header",children:Object(j.jsx)(N,{setModal:y})}),Object(j.jsxs)("div",{className:"Time-Selector",children:[Object(j.jsx)("div",{onClick:I,children:x.name?Object(j.jsx)(L.a,{style:{backgroundColor:x.relaypower?"green":"red"},className:"powericon"}):null}),Object(j.jsx)("h1",{className:"CurrentNameHeader",children:x.name})]}),Object(j.jsx)("div",{className:"General-Info",children:Object(j.jsx)(C,{price:a.energyprice,device:x.color?x:"test"})}),Object(j.jsx)("div",{className:"Graph",children:x.archive?Object(j.jsx)(h,{data:[{id:x.name,data:x.archive.map((function(e){return{x:new Date(e.date).getSeconds(),y:e.power}}))}],color:x.color}):[]}),Object(j.jsx)("div",{className:"Devices",children:Object(j.jsx)(z,{devices:o,setCurrentDevice:v,currentDevice:x})}),Object(j.jsx)("div",{className:"Postal-Info",children:Object(j.jsx)("h1",{})}),Object(j.jsx)("div",{className:"Footer",children:Object(j.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#34495e",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xa9 Copyright by Power Measurement Unit"})})]})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,417)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root")),D()}},[[377,1,2]]]);
//# sourceMappingURL=main.b8b9d1f5.chunk.js.map