(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{212:function(e,t,c){},237:function(e,t,c){},238:function(e,t,c){},353:function(e,t,c){},354:function(e,t,c){},372:function(e,t,c){},373:function(e,t,c){},374:function(e,t,c){"use strict";c.r(t);var a=c(3),r=c.n(a),i=c(91),n=c.n(i),s=(c(237),c(10)),o=(c(238),c(223)),l=(c(353),c(1)),d=function(e){return Object(l.jsxs)("div",{className:"graph",children:[Object(l.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:600,textAlign:"center",transform:"translateY(20px)"},children:"Power Usage"}),Object(l.jsx)(o.a,{data:e.data,margin:{top:30,right:30,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},yFormat:" >-.2f",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:0,tickPadding:3,tickRotation:0,legend:"Time",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Energy usage",legendOffset:-40,legendPosition:"middle"},colors:e.color,lineWidth:4,pointSize:2,pointColor:{from:"color",modifiers:[]},pointBorderWidth:8,pointBorderColor:{from:"color",modifiers:[]},pointLabelYOffset:-12,enableArea:!0,areaOpacity:.35,useMesh:!0})]})},h=(c(354),c(224)),j=function(e){var t;return e.data!==[]&&(t=e.data.reduce((function(e,t){return e+("No Data"===t.value?0:t.value)}),0)),Object(l.jsxs)("div",{className:"piegraph",children:[Object(l.jsxs)("div",{className:"overlay",children:[Object(l.jsx)("p",{className:"powerusage",children:"power usage:"}),Object(l.jsx)("h2",{className:"wattamount",children:t}),Object(l.jsx)("h3",{className:"watts",children:"Watts"})]}),Object(l.jsx)("div",{className:"piechart",children:Object(l.jsx)(h.a,{data:e.data,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.75,activeInnerRadiusOffset:2,activeOuterRadiusOffset:14,borderWidth:5,colors:["#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393"],borderColor:{from:"color",modifiers:[["darker","1"]]},enableArcLinkLabels:!1,arcLinkLabelsSkipAngle:0,arcLinkLabelsTextColor:{from:"color",modifiers:[]},arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color",modifiers:[]},enableArcLabels:!1,arcLabel:"value",arcLabelsRadiusOffset:.45,arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[]})})]})},b=c(15),f=c.n(b),u=c(140),m=c(54),v=c(221),x=c.n(v),g=["#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393","#00B894","#00cec9","#0984e3","#6c5ce7","#fdcb6e","#e17055","#d63031","#e84393"],O=function(){var e=Object(m.a)(f.a.mark((function e(t,c){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=localStorage.getItem("authtoken"))){e.next=12;break}return e.next=5,x.a.get("/api/getuserdata",{headers:{authorization:"Bearer ".concat(a)}});case 5:200!==(r=e.sent).status&&(window.location.href="/login"),r.data.data.user.devices=r.data.data.user.devices.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{color:g[t]})})),t(r.data.data.user),c(r.data.data.user.devices),e.next=13;break;case 12:window.location.href="/login";case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),window.location.href="/login";case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,c){return e.apply(this,arguments)}}(),p=O,w=(c(372),c(98)),N=function(){return Object(l.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(l.jsx)("a",{href:"/",className:"logo",children:Object(l.jsx)("img",{src:"https://www.projectpmu.xyz/earth.png",alt:"pmu logo",className:"logo"})}),Object(l.jsx)("div",{className:"dashboardText",children:"PMU Dashboard"}),Object(l.jsxs)("div",{className:"addDevice",children:[Object(l.jsx)(w.b,{className:"scanIcon"}),Object(l.jsx)("div",{style:{color:"white",fontSize:"1.7rem",whiteSpace:"nowrap"},children:"Add device"})]}),Object(l.jsxs)("div",{className:"settings",children:[Object(l.jsx)(w.c,{className:"settingIcon"}),Object(l.jsx)("div",{style:{color:"#316526",fontSize:"1.7rem",whiteSpace:"nowrap"},children:"Settings"})]}),Object(l.jsxs)("button",{onClick:function(){localStorage.removeItem("authtoken"),window.location.href="/"},className:"logOut",children:[Object(l.jsx)(w.a,{className:"logOutIcon"}),Object(l.jsx)("div",{style:{color:"white",fontSize:"1.7rem",whiteSpace:"nowrap"},children:"Log out"})]})]})},k=(c(212),c(222)),C=function(e){return Object(l.jsx)("div",{className:"range-bar",children:Object(l.jsx)(k.a,{data:[{id:"",ranges:[20,40,70,100],measures:[0],markers:[e.marker]}],margin:{top:50,right:90,bottom:50,left:90},spacing:42,titlePosition:"after",titleOffsetX:-53,rangeBorderColor:{from:"color",modifiers:[]},measureSize:.1,markerSize:1.5,measureColors:"#ffffff",markerColors:"#000000",rangeColors:["#27ae60","#F1C40F","#F39C12","#C0392B"]})})},y=function(e){if("test"===e.device)return Object(l.jsx)("div",{className:"general-box",children:Object(l.jsx)("h1",{style:{fontSize:"3rem"},children:"Please Select A Device"})});try{return Object(l.jsxs)("div",{className:"general-box",children:[Object(l.jsxs)("div",{className:"text-items",children:[Object(l.jsxs)("h1",{className:"kosten-test",children:["Power State: ",e.device.relaypower?"ON":"OFF"]}),Object(l.jsxs)("h1",{className:"kosten-test",children:["Verbruik:"," ",e.device.archive[e.device.archive.length-1].power," W"]}),Object(l.jsxs)("h1",{className:"kosten-test",children:["Kosten:"," ",e.price?(e.price*(e.device.archive[e.device.archive.length-1].power/1e3)).toFixed(2):"No Energyprice"," ","\u20ac"]}),Object(l.jsxs)("h1",{className:"kosten-test",children:["Uitstoot:"," ",(e.device.archive[e.device.archive.length-1].power/1e3*.649).toFixed(2)," ","kg"]})]}),Object(l.jsx)("div",{className:"range-bar-box",children:Object(l.jsx)(C,{marker:30*Math.random()+40})})]})}catch(t){return Object(l.jsx)("div",{className:"general-box",children:Object(l.jsx)("h1",{style:{fontSize:"3rem"},children:"No Data on device"})})}},S=(c(373),function(e){var t,c=e.data,a=e.callback;return t=c.current?{border:"4px solid ".concat(c.cardColor),backgroundColor:"".concat(c.cardColor),color:"#ffffff"}:{border:"4px solid ".concat(c.cardColor)},Object(l.jsxs)("div",{onClick:a.bind(this,c.id),style:t,className:"device-card",children:[Object(l.jsx)("div",{style:{backgroundColor:c.cardColor},className:"block"}),Object(l.jsx)("h2",{className:"device-name",children:c.name}),Object(l.jsx)("div",{style:{backgroundColor:c.powerColor},className:"power-card",children:Object(l.jsx)("h3",{className:"power-data-label",children:"".concat(c.power," ").concat("No Data"===c.power?"":" W")})})]})}),L=function(e){var t=e.devices,c=e.setCurrentDevice,a=e.currentDevice;return Object(l.jsx)("div",{style:{width:"100%",height:"100%"},children:t.map((function(e){var r,i=e===a,n=e.id;return r=e.archive[e.archive.length-1]?e.archive[e.archive.length-1].power:"No Data",Object(l.jsx)(S,{callback:function(e){return c(t.find((function(t){return t.id===e})))},data:{cardColor:e.color,powerColor:"#F39C12",power:r,name:e.name,id:n,current:i}},n)}))})};var D=function(){var e=Object(a.useState)({}),t=Object(s.a)(e,2),c=t[0],r=t[1],i=Object(a.useState)([]),n=Object(s.a)(i,2),o=n[0],h=n[1],b=Object(a.useState)({}),f=Object(s.a)(b,2),u=f[0],m=f[1];return Object(a.useEffect)((function(){p(r,h)}),[]),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("div",{className:"Pie",children:Object(l.jsx)(j,{data:o.map((function(e){var t=e.archive[e.archive.length-1]?e.archive[e.archive.length-1].power:"No Data";return{id:e.name,label:e.name,value:t}}))})}),Object(l.jsx)("div",{className:"Header",children:Object(l.jsx)(N,{})}),Object(l.jsx)("div",{className:"Time-Selector",children:Object(l.jsx)("h1",{className:"CurrentNameHeader",children:u.name})}),Object(l.jsx)("div",{className:"General-Info",children:Object(l.jsx)(y,{price:c.energyprice,device:u.color?u:"test"})}),Object(l.jsx)("div",{className:"Graph",children:u.archive?Object(l.jsx)(d,{data:[{id:u.name,data:u.archive.map((function(e){return{x:new Date(e.date).getSeconds(),y:e.power}}))}],color:u.color}):[]}),Object(l.jsx)("div",{className:"Devices",children:Object(l.jsx)(L,{devices:o,setCurrentDevice:m,currentDevice:u})}),Object(l.jsx)("div",{className:"Postal-Info",children:Object(l.jsx)("h1",{})}),Object(l.jsx)("div",{className:"Footer",children:Object(l.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#34495e",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xa9 Copyright by Power Measurement Unit"})})]})},z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,414)).then((function(t){var c=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,n=t.getTTFB;c(e),a(e),r(e),i(e),n(e)}))};n.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root")),z()}},[[374,1,2]]]);
//# sourceMappingURL=main.b9f8692d.chunk.js.map